# 8288

## 注意
このドキュメントは英語が苦手な私が、拙速に参照するために作成したものです。基本的には原本(英語)を見ながら使用します。

変な表現や間違った訳が存在しており、いくつかは認識しています。基本的に修正する予定はありません。

8288を設計する方は、ほとんどの場合はオリジナルを参照した方が効率的でしょう。

## 概要
8288バスコントローラは中-大規模な8086, 8088, 8089そして80186プロセッサーシステムのコンポーネントである。
バスコントローラはコマンドとコントロールタイミングの生成を提供する。

バスコントローラのストラップオプションは、マルチマスタシステムのバスと分離したI/Oバスで使用するように構成される。

### VCC
パワー: +5V電源供給

### GND
グランド

### /S0, /S1, /S2
Type: I

ステータス入力ピン: それらのピンは、8086, 8088, 8089そして80186プロセッサーから入力されるステータスピンである。
8288はそれらの生成したコマンドとコントロール信号を適切なタイミングでデコードする。
それらのピンを使用しないときは、すべてHIGHにする。(下のコマンドとコントロールロジックの表を見よ)

### CLK
Type: I
クロック: この信号は8284Aクロックジェネレータとコマンドとコントロール信号が生成されたタイミングを確定するサービスより送られる。

### ALE
Type: O

アドレスラッチイネーブル: この信号は、アドレスラッチ回路にアドレスをストローブさせる信号である。
この信号はアクティブHIGHであり、LOW->HIGHへとたち下がりを送信することでラッチを発生させる。
ALEはトランスペアレント・Dラッチを使用することを意図している。

### DEN
Type: O

データイネーブル: この信号はローカルまたはシステムデータバス上のデータ送信を有効にする。
この信号はアクティブ・ハイである。

### DT／/R
Type: O

データ送信/受信: この信号は、送信データを通す方向をを確立する。
HIGHは、送信(I/Oかメモリへの書込)を示し、LOWは受信(読取り)を示す。

### /AEN
Type: I

アドレスイネーブル: /AEN が有効なコマンドはそれがアクティブ(LOW)になってから少なくとも115ns後に8288バスコントローラの出力する。
/AENが非アクティブとなるとすぐにコマンド出力ドライバをトライステート(Hi-Z)にする。
8288がI/Oバスモード(IOBはHIGH)のときは、/AENはI/Oコマンドラインに影響を与えない。

### CEN
Type: I

コマンドイネーブル: この信号がLOWとなったとき、すべての8288コマンド出力とDENと/PDEN制御出力を強制的に非アクティブ状態にする。
この信号がHIGHのとき、それらの出力は有効となる。

### IOB
Type: I

入力/出力バスモード: この信号がHIGHのとき、8288はI/Oバスモード機能となる。
この信号がLOWのとき、8288はシステムバスモード機能となる。(I/Oバスとシステムバスモードのセクションを見よ)

### /AIOWC
Type: O

高度なI/O書込コマンド: /AIOWCは、I/Oデバイスに早めに書き込み命令を示すために、マシンサイクルの早い段階でI/O書き込みコマンドを発行する。
そのタイミングは、読取りコマンド信号と同じである。
/AIOWCはアクティブLOWである。

### /IOWC
Type: O

I/O書込コマンド: このコマンドラインは、I/Oデバイスにデータバス上のデータを読み取るように指示する。
この信号はアクティブLOWである。

### /IORC
Type: O

I/O読込コマンド: このコマンドラインは、I/Oデバイスにデータバス上にデータを乗せるように指示する。
この信号はアクティブLOWである。

### /AMWC
Type: O

高度なメモリ書込コマンド: /AMWCは、メモリデバイスに早めに書き込み命令を示すために、マシンサイクルの早い段階でメモリ書き込みコマンドを発行する。
そのタイミングは、読取りコマンド信号と同じである。
/AIOWCはアクティブLOWである。

### /MWTC
Type: O

メモリ書込コマンド: このコマンドラインは、メモリにデータバス上のデータを記録するように指示する。
この信号はアクティブLOWである。

### /MRDC
Type: O

メモリ読込コマンド: このコマンドラインは、メモリにデータバス上にデータを乗せるように指示する。
この信号はアクティブLOWである。

### /INTA
Type: O

割込受付: このコマンドラインは、割り込みが受け付けられたことと、データバス上にベクタ情報をドライブするべきことを割り込みデバイスに伝える。
この信号はアクティブLOWである。

### MCE／/PDEN
Type: O

このピンには2つの機能がある。

MCE(IOBがLOWのとき): マスターカスケードイネーブルは割り込みシーケンス中に発生し、マスターPIC(優先割り込みコントローラ)からのカスケードアドレスをデータバス上への読み出しを提供する。

/PDEN(IOBがHIGHのとき): ペリフェラルデータイネーブルは、DENがシステムバスに対して実行するI/Oバスのデータバス送信を有効にする。

# 機能説明

## コマンドとコントロールロジック
コマンドロジックは何のコマンドが発生したかを決定するために、3つの8086,8088,8089または80186CPUステータスライン(/S0, /S1, /S2)をデコードする。

この表は、各ステータス"ワード"の意味を示す。
|/S2|/S1|/S0|Processor State      |M8288 Command|
|:--|---|---|---------------------|-------------|
|0  |0  |0  |Interrupt Acknowledge|/INTA        |
|0  |0  |1  |Read I/O Port        |/IORC        |
|0  |1  |0  |Write I/O Port       |/IOWC, /AIOWC|
|0  |1  |1  |Halt                 |None         |
|1  |0  |0  |Code Access          |/MRDC        |
|0  |0  |1  |Read Memory          |/MRDC        |
|0  |1  |0  |Write Memory         |/MWTC, /AMWC |
|1  |1  |1  |Passive              |None         |

コマンドは8288バスコントローラのモードに応じて2つのうち1つの方法で発行される。

### I/Oバスモード
IOBピンがHIGHにつられているとき8288はI/Oバスモードとなる。
I/Oバスモードでは、すべてのI/Oコマンドライン(/IORC, /IOWC, /AIOWC, /INTA)は常に有効となる。(言い換えると/AENに依存しない)
I/Oコマンドがプロセッサによって初期化されたとき、8288は/PDENとDT／/Rを使用し、すぐにコマンドラインをアクティブにし、I/Oバストランシーバーを制御する。
I/Oコマンドラインの構成はシステムバス制御に使用するべきではない。なぜならば調停が提供されないからである。
このモードでは、1つの8288バスコントローラで2つの外部バスをハンドルすることを許可する。
CPUがI/Oバスにアクセスしたい場合、待機する必要はない。
通常のメモリアクセスではそれ進める前に"バス待機"信号(/AENがLOW)を要求する。
マルチプロセッサ内に１つのI/Oペリフェラル専用のプロセッサが存在する場合、IOBモードを使用することは有利である。

### システムバスモード
IOBピンがLOWにつられているとき8288はシステムバスモードとなる。
このモードでは、/AENがアクティブ(LOW)になってから115ns後までコマンドは発行されない。
このモードは、バスが自由に使用できるときにバス調停ロジックがバスコントローラに(/AENラインを通して)通知することを想定している。
メモリ、I/Oコマンドどちらもバス調停の待機をする。
このモードはバスが1つ存在するときに使用される。
ここでは、I/Oとメモリ両方が1つ以上のプロセッサで共有される。

## コマンド出力
高度な書込コマンドはマシンサイクルの早い段階で書込手順を開始できる。
この信号は、プロセッサが不要な待機状態に入るのを防ぐために使用される。

コマンド出力は、

- /MRDC  - メモリ読取りコマンド
- /MWTC  - メモリ書込コマンド
- /IORC  - I/O読取りコマンド
- /IOWC  - I/O書込コマンド
- /AMWC  - 高度なメモリ書込コマンド
- /AIOWC - 高度なI/O書込コマンド
- /INTA  - 割込受付

/INTA(割込受付)は割込サイクル中にI/O読取りとして機能する。
その目的は、割込が確認されていることと、ベクター情報をデータバス上にのせるべきことを割込デバイスに通知することである。

## コントロール出力
8288のコントロール出力は、データイネーブル(DEN)、データ送受信(DT／/R)そしてマスターカスケードイネーブル/ペリフェラルデータイネーブル(MCE／/PDEN)である。
DEN信号は外部バスをローカルバスで有効にするときを決定し、DT／/Rはデータの転送方向を決定する。
それらの2つの信号は、通常1つのトランシーバのチップセレクトと、方向ピンへ入力される。
MCE／/PDENピン2つのモードによって機能が変化する。
8288がIOBモード(IOBがHIGH)のとき、/PDEN信号はI/Oまたは周辺システムバス用のデータイネーブル信号を提供する。

## 割込受付とMCE
MCE信号は、8288がシステムバスモード(IOBがLOW)の場合に割込確認サイクル中に使用される。
割込シーケンスの間には、連続して発生する2つの割込確認サイクルがある。
最初の割込サイクル中では、データまたはアドレス転送は行われない。
ロジックは、このサイクル中にMCEをオフにする必要がある。
2サイクル目が始まる直前にMCE信号は、マスタの優先割込コントローラ(PIC)のカスケードアドレスをプロセッサーのローカルバスへゲートし、ALE(アドレスラッチイネーブル)はそれをアドレスラッチへストローブする。
2回目の割込サイクルのエッジで、アドレス指定されたスレーブPICが割込ベクタをシステムバス上へゲートし、プロセッサがそれを読み取る。
システムにPICが1つだけしかない場合、MCE信号は使用されない。
このケースでは、2回目の割込応答信号は割込ベクタをプロセッサバス上にゲートする。

## アドレスラッチイネーブルとHALT
アドレスラッチイネーブル(ALE)は各マシンサイクル中に発生し、現在のアドレスをアドレスラッチへストローブする。
ALEはHALTステートのデコードのために、ステータスをラッチへストローブする役割も提供する。

## コマンドイネーブル
コマンドイネーブル(CEN)入力は、8288のコマンド修飾子(?)として機能する。
CENピンがHIGHの場合、8288は通常の機能となる。
CENピンがLOWになった場合、すべてのコマンドラインは非アクティブな状態(3ステートではない)で保持される。
この機能を使用して、メモリの分割を実装し、システムバスデバイスと居住(?多分DMAなどのこと)バスデバイス間のアドレス競合を排除できる。

